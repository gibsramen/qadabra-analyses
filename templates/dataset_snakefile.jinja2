module {{ dataset_name }}:
    snakefile:
        github("gibsramen/qadabra", path="workflow/Snakefile", tag="v0.2.0")
    config:
        create_cfg("{{ dataset_name }}")
    prefix: "all_results/{{ dataset_name }}"

use rule * from {{ dataset_name }} as {{ dataset_name }}_*
{% for tool in all_tools %}
use rule {{ tool }} from {{ dataset_name }} as {{ dataset_name }}_{{ tool }} with:
    input:
        table=dataset_cfg["{{ dataset_name }}"]["table"],
        metadata=dataset_cfg["{{ dataset_name }}"]["metadata"]
{% endfor %}

use rule log_ratios from {{ dataset_name }} as {{ dataset_name }}_log_ratios with:
    input:
        table=dataset_cfg["{{ dataset_name }}"]["table"],

use rule logistic_regression from {{ dataset_name }} as {{ dataset_name }} logistic_regression with:
    input:
        metadata=dataset_cfg["{{ dataset_name }}"]["metadata"]
